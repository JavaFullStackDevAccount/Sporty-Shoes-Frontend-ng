<div class="toolbar-bg p-2 container-fluid text-left">
  <h2>&nbsp;&nbsp;Sporty shoes</h2>
</div>

<div class="container mt-5">
  <div class="container-fluid text-right">
    <h3 class="text-muted">Purchase reports</h3>
  </div>
  <hr />

  <div class="container-fluid text-left mt-5">
    <div class="row">
      <div class="col-6 text-left">
        <br />
        <p class="h1 text-muted">Orders</p>
      </div>

      <div class="col-6 text-right">
        <form [formGroup]="filterForm" (submit)="filterFormSubmit()">
          <div class="row">
            <div class="col-4 text-left">
              <div class="p-field p-col-12">
                <label class="mr-3">Select category</label>
                <p-dropdown
                  [options]="category"
                  optionLabel="name"
                  placeholder="Select a category"
                  styleClass="w-100"
                  formControlName="categoryForFiltering"
                ></p-dropdown>
              </div>
            </div>
            <div class="col-4 text-left">
              <div class="p-field p-col-12">
                <label for="basic" class="mr-3">Select date</label>
                <p-calendar formControlName="dateForFiltering"></p-calendar>
              </div>
            </div>

            <div class="col-4 text-left">
              <div class="p-field p-col-12">
                <label class="mr-5 text-white">search</label>
                <button
                  type="button"
                  pButton
                  pRipple
                  icon="pi pi-filter"
                  label="filter"
                  type="submit"
                ></button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>

    <p-table
      [value]="ordersList"
      styleClass="p-datatable-striped mt-5"
      selectionMode="single"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>User name</th>
          <th>Product name</th>
          <th>Category</th>
          <th>Purchased on</th>
          <th>Amount paid &#x20B9;</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-order>
        <tr [pSelectableRow]="order">
          <td>{{ order["sportyShoesUserDetails"]["username"] }}</td>

          <td>{{ order["products"]["name"] }}</td>

          <td>{{ order["products"]["category"]["name"] }}</td>

          <td>{{ order["purchaseDate"] | date }}</td>

          <td>{{ order["products"]["price"] }}</td>
        </tr>
      </ng-template>
    </p-table>

    <div class="container-fluid text-right mt-4">
      <button
        type="button"
        pButton
        pRipple
        icon="pi pi-refresh"
        label=""
        (click) = "ngOnInit()"
      ></button>
    </div>
  </div>

  <div class="container-fluid text-left mt-5 pt-5">
    <p class="h2 text-muted">
      Total amount:
      <span class="display-4">{{ totalAmount }} <sup> &#x20B9;</sup></span>
    </p>
    <p class="h2 text-muted mt-3">
      Total purchases: <span class="display-4">{{ totalPurchases }}</span>
    </p>
  </div>
</div>


<app-footer>
    
</app-footer>